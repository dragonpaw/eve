{% extends "base.html" %}
{% load trade %}

{% block content %}
{% spaceless %}
<div class="user">
<div class="user-detail">
  <h4>Details</h4>
  <dl>
  <dt>User Name</dt><dd>{{ user.username }}</dd>
  <dt>Email</dt><dd>{{ user.email }}</dd>
  <dt>ID</dt><dd>{{ user.id }}</dd>
  </dl>
</div>
<div class="user-characters">
  <h4>Characters</h4>
  {% for a in user.get_profile.accounts.all %}
    {% for c in a.characters.all %}
      <h5>{{ c.name }} ({{ c.id }})</h5>
      <dl>
      	<dt>Corporation</dt><dd>{{ c.corporation }}</dd>
        <dt>ISK</dt><dd>{{ c.isk|comma }}</dd>
        <dt>Skill Points</dt><dd>{{ c.skill_points|comma }}</dd>
        {% if c.training_skill %} 
        <dt>Training</dt><dd>{{ c.training_skill }} {{ c.training_level }}</dd>
        <dt>Training Completion</dt><dd>{{ c.training_remaining|default:"Done"|time }}</dd>
        {% else  %}
        <dt>Training</dt><dd>None</dd>
        <dt>Training Completion</dt><dd> N/A</dd>
        {% endif %}
        <dt>Market Transactions</dt><dd>{{ c.transactions.count }}</dd>
        <dt>Last Refreshed</dt><dd>{{ a.last_refreshed }}</dd>
      </dl>
    {% endfor %}
  {% endfor %}  
</div>
<div class="user-characters">
  <h4>Accounts</h4>
  {% for a in user.get_profile.accounts.all %}
  <dl>
    <dt>ID</dt><dd>{{ a.id }}</dd>
    <dt>API Key</dt><dd><tt>{{ a.api_key_short }}</tt></dd>
  </dl>
  {% endfor %}
</div>
{% endspaceless %}
{% endblock %}
